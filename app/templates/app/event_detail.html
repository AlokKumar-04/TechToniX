{% extends 'app/base.html' %}
{% load static %}

{% block title %}Event Details - TechToniX{% endblock %}

{% block content %}
<div class="container my-5" id="event-details">
    <p>Loading...</p>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const eventId = window.location.pathname.split('/').pop(); // Get event ID from URL
        const eventDetailsDiv = document.getElementById('event-details');

        fetch(`/api/events/${eventId}/`)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                eventDetailsDiv.innerHTML = `
                    <h2>${data.name}</h2>
                    <img src="${data.event_image}" alt="${data.name}" style="max-width: 300px;">
                    <p>Date: ${data.date}</p>
                    <p>Location: ${data.location}</p>
                    <p>Description: ${data.description}</p>
                    <p>Organizer: ${data.organizer}</p>
                    <a href="/" class="btn btn-secondary mt-3">Back to Home</a>
                `;
            })
            .catch(error => {
                console.error('Error fetching event details:', error);
                eventDetailsDiv.innerHTML = '<p>Error loading event details.</p>';
            });
    });
</script>
{% endblock %}